$ python archive/test-zenodo.py
Accessing API...
/media/Data1/work/2017_smc_zenodo/py2env/local/lib/python2.7/site-packages/urllib3/util/ssl_.py:339: SNIMissingWarning: An HTTPS request has been made, but the SNI (Subject Name Indication) extension to TLS is not available on this platform. This may cause the server to present an incorrect TLS certificate, which can cause validation failures. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings
  SNIMissingWarning
/media/Data1/work/2017_smc_zenodo/py2env/local/lib/python2.7/site-packages/urllib3/util/ssl_.py:137: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings
  InsecurePlatformWarning
(200, [])
Next, let’s create a new empty upload
/media/Data1/work/2017_smc_zenodo/py2env/local/lib/python2.7/site-packages/urllib3/util/ssl_.py:137: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings
  InsecurePlatformWarning
(201, {u'files': [], u'links': {u'files': u'https://zenodo.org/api/deposit/depositions/849079/files', u'latest_draft_html': u'https://zenodo.org/deposit/849079', u'edit': u'https://zenodo.org/api/deposit/depositions/849079/actions/edit', u'self': u'https://zenodo.org/api/deposit/depositions/849079', u'bucket': u'https://zenodo.org/api/files/e99e4235-2549-42f0-9759-a2505a90c9e5', u'publish': u'https://zenodo.org/api/deposit/depositions/849079/actions/publish', u'html': u'https://zenodo.org/deposit/849079', u'latest_draft': u'https://zenodo.org/api/deposit/depositions/849079', u'discard': u'https://zenodo.org/api/deposit/depositions/849079/actions/discard'}, u'created': u'2017-08-26T11:52:21.070333+00:00', u'title': u'', u'modified': u'2017-08-26T11:52:21.070341+00:00', u'submitted': False, u'conceptrecid': u'849078', u'state': u'unsubmitted', u'record_id': 849079, u'owner': 34988, u'id': 849079, u'metadata': {u'prereserve_doi': {u'doi': u'10.5281/zenodo.849079', u'recid': 849079}}})
Now, let’s upload a new file:
# Get the deposition id from the previous response
(do the upload)
/media/Data1/work/2017_smc_zenodo/py2env/local/lib/python2.7/site-packages/urllib3/util/ssl_.py:137: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings
  InsecurePlatformWarning
201
{u'id': u'87e4e624-f0fb-4bbc-a6af-01094ec24f73', u'checksum': u'19efbdf32dfe0e73e80f7e64b96aa9b3', u'filesize': 186288, u'links': {u'download': u'https://zenodo.org/api/files/e99e4235-2549-42f0-9759-a2505a90c9e5/smc_2004_001.pdf', u'self': u'https://zenodo.org/api/deposit/depositions/849079/files/87e4e624-f0fb-4bbc-a6af-01094ec24f73'}, u'filename': u'smc_2004_001.pdf'}
Last thing missing, is just to add some metadata
/media/Data1/work/2017_smc_zenodo/py2env/local/lib/python2.7/site-packages/urllib3/util/ssl_.py:137: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings
  InsecurePlatformWarning
(200, {u'files': [{u'id': u'87e4e624-f0fb-4bbc-a6af-01094ec24f73', u'checksum': u'19efbdf32dfe0e73e80f7e64b96aa9b3', u'filesize': 186288, u'links': {u'download': u'https://zenodo.org/api/files/e99e4235-2549-42f0-9759-a2505a90c9e5/smc_2004_001.pdf', u'self': u'https://zenodo.org/api/deposit/depositions/844042/files/87e4e624-f0fb-4bbc-a6af-01094ec24f73'}, u'filename': u'smc_2004_001.pdf'}], u'links': {u'files': u'https://zenodo.org/api/deposit/depositions/849079/files', u'latest_draft_html': u'https://zenodo.org/deposit/849079', u'edit': u'https://zenodo.org/api/deposit/depositions/849079/actions/edit', u'self': u'https://zenodo.org/api/deposit/depositions/849079', u'bucket': u'https://zenodo.org/api/files/e99e4235-2549-42f0-9759-a2505a90c9e5', u'publish': u'https://zenodo.org/api/deposit/depositions/849079/actions/publish', u'registerconceptdoi': u'https://zenodo.org/api/deposit/depositions/849079/actions/registerconceptdoi', u'html': u'https://zenodo.org/deposit/849079', u'latest_draft': u'https://zenodo.org/api/deposit/depositions/849079', u'discard': u'https://zenodo.org/api/deposit/depositions/849079/actions/discard', u'newversion': u'https://zenodo.org/api/deposit/depositions/849079/actions/newversion'}, u'created': u'2017-08-26T11:52:21.070333+00:00', u'title': u'A PREGROUP GRAMMAR FOR CHORD SEQUENCES', u'modified': u'2017-08-26T11:52:26.952481+00:00', u'submitted': False, u'conceptrecid': u'849078', u'state': u'unsubmitted', u'record_id': 849079, u'owner': 34988, u'id': 849079, u'metadata': {u'conference_title': u'1st Sound and Music Computing Conference', u'description': u'(Abstract to follow)', u'license': u'CC-BY-4.0', u'title': u'A PREGROUP GRAMMAR FOR CHORD SEQUENCES', u'upload_type': u'publication', u'publication_type': u'conferencepaper', u'conference_url': u'http://smcnetwork.org/resources/smc2004', u'conference_dates': u'20-22 October 2004', u'conference_place': u'Paris, France', u'prereserve_doi': {u'doi': u'10.5281/zenodo.849079', u'recid': 849079}, u'communities': [{u'identifier': u'smc'}], u'publication_date': u'2004-10-20', u'creators': [{u'name': u'Richard G. Terrat'}], u'access_right': u'open', u'conference_acronym': u'SMC2004', u'related_identifiers': [{u'scheme': u'issn', u'identifier': u'2518-3672', u'relation': u'isPartOf'}]}})
And we’re ready to publish
/media/Data1/work/2017_smc_zenodo/py2env/local/lib/python2.7/site-packages/urllib3/util/ssl_.py:137: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings
  InsecurePlatformWarning
(202, {u'files': [{u'id': u'87e4e624-f0fb-4bbc-a6af-01094ec24f73', u'checksum': u'19efbdf32dfe0e73e80f7e64b96aa9b3', u'filesize': 186288, u'links': {u'download': u'https://zenodo.org/api/files/e99e4235-2549-42f0-9759-a2505a90c9e5/smc_2004_001.pdf', u'self': u'https://zenodo.org/api/deposit/depositions/847681/files/87e4e624-f0fb-4bbc-a6af-01094ec24f73'}, u'filename': u'smc_2004_001.pdf'}], u'doi': u'10.5281/zenodo.849079', u'links': {u'doi': u'https://doi.org/10.5281/zenodo.849079', u'conceptdoi': u'https://doi.org/10.5281/zenodo.849078', u'record': u'https://zenodo.org/api/records/849079', u'bucket': u'https://zenodo.org/api/files/e99e4235-2549-42f0-9759-a2505a90c9e5', u'conceptbadge': u'https://zenodo.org/badge/doi/10.5281/zenodo.849078.svg', u'latest_html': u'https://zenodo.org/record/849079', u'record_html': u'https://zenodo.org/record/849079', u'badge': u'https://zenodo.org/badge/doi/10.5281/zenodo.849079.svg', u'latest': u'https://zenodo.org/api/records/849079'}, u'conceptdoi': u'10.5281/zenodo.849078', u'created': u'2017-08-26T11:52:21.070333+00:00', u'title': u'A PREGROUP GRAMMAR FOR CHORD SEQUENCES', u'modified': u'2017-08-26T11:52:28.083300+00:00', u'submitted': True, u'conceptrecid': u'849078', u'state': u'done', u'doi_url': u'https://doi.org/10.5281/zenodo.849079', u'record_id': 849079, u'owner': 34988, u'id': 849079, u'metadata': {u'conference_title': u'1st Sound and Music Computing Conference', u'doi': u'10.5281/zenodo.849079', u'description': u'(Abstract to follow)', u'license': u'CC-BY-4.0', u'title': u'A PREGROUP GRAMMAR FOR CHORD SEQUENCES', u'upload_type': u'publication', u'publication_type': u'conferencepaper', u'conference_url': u'http://smcnetwork.org/resources/smc2004', u'conference_dates': u'20-22 October 2004', u'conference_place': u'Paris, France', u'prereserve_doi': {u'doi': u'10.5281/zenodo.849079', u'recid': 849079}, u'communities': [{u'identifier': u'smc'}, {u'identifier': u'zenodo'}], u'publication_date': u'2004-10-20', u'creators': [{u'name': u'Richard G. Terrat'}], u'access_right': u'open', u'conference_acronym': u'SMC2004', u'related_identifiers': [{u'scheme': u'issn', u'identifier': u'2518-3672', u'relation': u'isPartOf'}]}})
(py2env)
